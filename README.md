# wm-api
## How to use?

Для использования необходимо посылать get запросы на domain/method передавая несколько параметров:
```
method - имя метода, например 'message.send';
accesstoken - токен доступа. Можно получить вызвав 'user.auth' и передав логин с паролем
id - идентификатор, например пользователя или сообщения
```
Так же может потребоваться передать другие параметры, если параметра не будет передано сервер вернёт 

`{'error':{"code":3,"text":this keys is empty: }}` передав массив недостающих параметров


## Ошибки

Во время использования сервер может вернуть несколько различных ошибок. Каждая из ник имеет свой код и описание('text'), из которого можно понять, что не так.

Известные коды ошибок:
```

2,'{key}' is invalid - происходит, когда параметр передан, но имеет невалидный формат(или, как например с токеном - недействителен)

3,this keys is empty: {empty} - происходит, когда в запрос не вложены необходимые параметры. Вместо {empty} передаёт список строк - имен параметров

4,this {object} not exists - происходит при попытке обратиться к несуществующему объекту, например при передаче id несуществуещего пользователя при выполнении 'user.get'

5,unknown method passed - просходит при указании неверного параметра 'method'

6,login or password is incorrect - происходит в методе user.auth при указании неверных аутентификационных данных

7,access denided for this action - происходит при запросе, ответ на который сервер не должен возвращать(например при получении сообщения, не принадлежащего пользователю)

404,page not found - присходит при попытке достучаться до несуществующей страницы. Все методв api должны проходить через domain/method

500,internal server error - проиходит, когда сервер не может обработать запрос(такое поведение ожидаемо при попытках организовать sql иньекцию)

```
## Updates

Получить обновления(события) необходимо выполнить `updates.get` передав `count=10` и `ofset=0`

В ответ сервер вернёт массив объектов, куаждый из которых содержит следующие поля:

`type` - число, означающее код события. 


| Код | событие |
| --- | --- |
| 1 | Входящее сообщение |
| 2 | Исходящее сообщение доставлено |


## Bugs

Статусы для отчетов от нуля:
| Код | Статус |
| --- | --- |
| 0 | .Открыт |
| 1 | .На рассмотрении |
| 2 | .В работе |
| 3 | .Исправлен |
| 4 | .Готов к тестированию |
| 5 | Верифицирован |
| 6 | Переоткрыт |
| 7 | .Отклонен |
| 8 | .Отоложен |
| 9 | .Не будет исправлен |
| 10 | .Закрыт |
| 11 | Неактуален |



api.wan-group.ru

wan-group.ru:5000
 
